name: ðŸ¦• releasaurus
description: Releasaurus worflow to fully manage release process for github repositories
inputs:
  repo:
    description: The github repo to affect
    default: ${{ github.server_url }}/${{ github.repository }}
  token:
    description: The github token to use. This token will need privileges to create PRs, tags, labels, and releases
  debug:
    description: Enables debug logs
    default: ""
outputs: {}
runs:
  using: "composite"
  steps:
    - name: check commit
      id: check_commit
      shell: bash
      run: |
        if [[ "${{ github.event.head_commit.message }}" =~ "^chore.*: release.+" ]]; then
            echo "is_release_commit=true" >> $GITHUB_OUTPUT
        else
          echo "is_release_commit=false" >> $GITHUB_OUTPUT
        fi
    - uses: robgonnella/releasaurus/action/github/release@v0.8.0
      if: ${{ steps.check_commit.outputs.is_release_commit == 'true' }}
      with:
        repo: ${{ inputs.repo }}
        token: ${{ inputs.token }}
        debug: ${{ inputs.debug }}
    - uses: robgonnella/releasaurus/action/github/release-pr@v0.8.0
      if: ${{ steps.check_commit.outputs.is_release_commit == 'false' }}
      with:
        repo: ${{ inputs.repo }}
        token: ${{ inputs.token }}
        debug: ${{ inputs.debug }}

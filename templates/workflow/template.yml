spec:
  component: [version]
  inputs:
    repo:
      description: The gitlab repo to affect
      default: $CI_PROJECT_URL
    token:
      description: The gitlab token to use. This token will need privileges to create MRs, tags, labels, and releases
    debug:
      description: Enables debug logs
      default: ""
    release_pr_job_name:
      description: Customize the generated job name for release-pr command (default = release-pr)
      default: release-pr
    release_pr_job_stage:
      description: The stage in which to run the release-pr job
      default: .pre
    release_job_name:
      description: Customize the generated job name for release command (default = release)
      default: release
    release_job_stage:
      description: The stage in which to run the release job
      default: .pre
    base_branch:
      description: The base branch to target
      default: $CI_DEFAULT_BRANCH
---
include:
  - component: $CI_SERVER_FQDN/rgon/releasaurus/release-pr@$[[ component.version ]]
    inputs:
      repo: $[[ inputs.repo ]]
      debug: $[[ inputs.debug ]]
      token: $[[ inputs.token ]]
      job_name: $[[ inputs.release_pr_job_name ]]
      job_stage: $[[ inputs.release_pr_job_stage ]]
      base_branch: $[[ inputs.base_branch ]]
  - component: $CI_SERVER_FQDN/rgon/releasaurus/release@$[[ component.version ]]
    inputs:
      repo: $[[ inputs.repo ]]
      debug: $[[ inputs.debug ]]
      token: $[[ inputs.token ]]
      job_name: $[[ inputs.release_job_name ]]
      job_stage: $[[ inputs.release_job_stage ]]
      base_branch: $[[ inputs.base_branch ]]
